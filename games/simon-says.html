<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simon Says: Memory Master</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --red: #ff4d4d;
            --blue: #4d94ff;
            --green: #4dff4d;
            --yellow: #ffff4d;
            --bg: #121212;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg);
            color: #fff;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .premium-header {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 40px;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            z-index: 100;
            border-bottom: 2px solid rgba(255, 255, 255, 0.05);
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: #fff;
            font-weight: 800;
        }

        .game-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .simon-controller {
            width: 400px;
            height: 400px;
            background: #000;
            border-radius: 50%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 15px;
            padding: 15px;
            border: 10px solid #222;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            position: relative;
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .simon-controller.rotating {
            animation: simon-spin 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes simon-spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(90deg);
            }
        }

        .pad {
            cursor: pointer;
            opacity: 0.3;
            transition: 0.2s;
        }

        .pad-red {
            background: var(--red);
            border-radius: 100% 0 0 0;
        }

        .pad-blue {
            background: var(--blue);
            border-radius: 0 100% 0 0;
        }

        .pad-green {
            background: var(--green);
            border-radius: 0 0 0 100%;
        }

        .pad-yellow {
            background: var(--yellow);
            border-radius: 0 0 100% 0;
        }

        .pad.active {
            opacity: 1;
            filter: brightness(1.5);
            box-shadow: 0 0 30px currentColor;
            transform: scale(0.98);
        }

        .center-hub {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            background: #222;
            border-radius: 50%;
            border: 8px solid #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .round-info {
            font-size: 24px;
            font-weight: 900;
        }

        .lbl {
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            color: #666;
        }

        #msg {
            position: absolute;
            bottom: 100px;
            font-size: 24px;
            font-weight: 800;
            text-align: center;
            width: 100%;
            color: var(--blue);
            transition: 0.3s;
        }

        .screen-flash {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            transition: 0.2s;
        }

        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 200;
            backdrop-filter: blur(5px);
        }

        .btn {
            background: #fff;
            color: #000;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-weight: 900;
            cursor: pointer;
            margin-top: 20px;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <header class="premium-header">
        <a href="../index.html" class="back-btn"><i data-lucide="arrow-left"></i><span>BACK</span></a>
        <div style="font-weight: 900; font-size: 24px;">SIMON <span style="color: var(--blue);">SAYS</span></div>
        <div style="width: 80px;"></div>
    </header>

    <div class="game-area">
        <div class="simon-controller">
            <div class="pad pad-red" id="0" onclick="playerClick(0)"></div>
            <div class="pad pad-blue" id="1" onclick="playerClick(1)"></div>
            <div class="pad pad-green" id="2" onclick="playerClick(2)"></div>
            <div class="pad pad-yellow" id="3" onclick="playerClick(3)"></div>
            <div class="center-hub">
                <div class="lbl">Round</div>
                <div class="round-info" id="round-val">1</div>
            </div>
        </div>
        <div id="msg">WATCH CAREFULLY...</div>
    </div>
    <div id="screen-flash" class="screen-flash"></div>

    <div id="overlay">
        <h1 style="font-size: 64px;" id="status-title">SIMON SAYS</h1>
        <button class="btn" id="start-btn" onclick="startGame()">START GAME</button>
    </div>

    <script>
        let sequence = [];
        let playerSequence = [];
        let round = 1;
        let isWaitingForPlayer = false;
        let rotationAngle = 0;
        const msgEl = document.getElementById('msg');
        const roundEl = document.getElementById('round-val');
        const overlay = document.getElementById('overlay');
        const pads = [
            document.getElementById('0'),
            document.getElementById('1'),
            document.getElementById('2'),
            document.getElementById('3')
        ];
        const colors = ["RED", "BLUE", "GREEN", "YELLOW"];

        function speak(text) {
            // Voice disabled
        }

        function startGame() {
            overlay.style.display = 'none';
            sequence = [];
            round = 1;
            nextRound();
        }

        function nextRound() {
            playerSequence = [];
            roundEl.innerText = round;
            sequence.push(Math.floor(Math.random() * 4));

            // Board Rotation every 2 levels
            if (round > 1 && round % 2 === 0) {
                applyRotation();
                speak("BOARD ROTATION!");
            }

            playSequence();
        }

        function applyRotation() {
            rotationAngle += 90;
            const controller = document.querySelector('.simon-controller');
            controller.style.transform = `rotate(${rotationAngle}deg)`;
        }

        async function playSequence() {
            isWaitingForPlayer = false;
            msgEl.innerText = "WATCH AND LISTEN...";
            msgEl.style.color = "var(--yellow)";
            speak("ROUND " + round + ". WATCH CAREFULLY.");

            const speed = Math.max(300, 800 - (round * 50));

            for (let id of sequence) {
                const colorName = colors[id];
                speak(colorName);
                await flashPad(id, speed);
                await new Promise(r => setTimeout(r, speed / 3));
            }

            isWaitingForPlayer = true;
            msgEl.innerText = "YOUR TURN!";
            msgEl.style.color = "var(--green)";
            speak("YOUR TURN.");
        }

        function flashPad(id, duration = 400) {
            return new Promise(r => {
                pads[id].classList.add('active');
                const flash = document.getElementById('screen-flash');
                flash.style.background = getComputedStyle(pads[id]).backgroundColor;
                flash.style.opacity = '0.1';
                setTimeout(() => {
                    pads[id].classList.remove('active');
                    flash.style.opacity = '0';
                    r();
                }, duration);
            });
        }

        function playerClick(id) {
            if (!isWaitingForPlayer) return;

            flashPad(id).then(() => {
                playerSequence.push(id);
                const currentIdx = playerSequence.length - 1;

                if (playerSequence[currentIdx] !== sequence[currentIdx]) {
                    gameOver();
                    return;
                }

                if (playerSequence.length === sequence.length) {
                    round++;
                    speak("EXCELLENT!");
                    document.getElementById('screen-flash').style.opacity = '0.3';
                    setTimeout(() => document.getElementById('screen-flash').style.opacity = '0', 300);
                    setTimeout(nextRound, 1000);
                }
            });
        }

        function gameOver() {
            isWaitingForPlayer = false;
            msgEl.innerText = "WRONG PATTERN!";
            msgEl.style.color = "var(--red)";
            speak("INCORRECT. SIMON DISAPPOINTED.");

            setTimeout(() => {
                overlay.style.display = 'flex';
                document.getElementById('status-title').innerText = "GAME OVER";
                document.getElementById('start-btn').innerText = "TRY AGAIN";
            }, 1000);
        }

        lucide.createIcons();
    </script>
</body>

</html>